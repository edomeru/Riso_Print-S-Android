<Grid x:Name="printSettingsBox"
    x:Class="SmartDeviceApp.Views.PrintSettingsBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SmartDeviceApp.Views"
    xmlns:controls="using:SmartDeviceApp.Controls"
    xmlns:sel="using:SmartDeviceApp.Selectors"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignWidth="400"
    d:DesignHeight="1000"
    DataContext="{Binding PrintSettingsViewModel, Source={StaticResource Locator}}">
    
    <Grid.Resources>
        <DataTemplate x:Key="TEMPLATE_ListViewItemToggleSwitch">
            <controls:KeyToggleSwitchControl Text="{Binding Path=Text, Converter={StaticResource ResourceStringToTextConverter}}"
                                             LeftButtonVisibility="Collapsed"
                                             RightButtonVisibility="{Binding Type, Converter={StaticResource PrintSettingTypeToVisibilityConverter}}"
                                             ValueVisibility="Collapsed"
                                             IconImage="ms-appx:///Resources/Images/img_btn_dummy_print_setting.png"/>
        </DataTemplate>
        <DataTemplate x:Key="TEMPLATE_ListViewItemTextBox">
            <controls:KeyTextBoxControl Text="{Binding Path=Text, Converter={StaticResource ResourceStringToTextConverter}}"
                                        LeftButtonVisibility="Collapsed"
                                        RightButtonVisibility="{Binding Type, Converter={StaticResource PrintSettingTypeToVisibilityConverter}}"
                                        ValueVisibility="Collapsed"
                                        IconImage="ms-appx:///Resources/Images/img_btn_dummy_print_setting.png"/>
        </DataTemplate>
        <DataTemplate x:Key="TEMPLATE_ListViewItemList">
            <controls:KeyValueControl x:Name="listViewItemList"
                                      Text="{Binding Path=Text, Converter={StaticResource ResourceStringToTextConverter}}"
                                      ValueText="{Binding Path=SelectedOption.Text, Converter={StaticResource ResourceStringToTextConverter}}"
                                      LeftButtonVisibility="Collapsed"
                                      RightButtonVisibility="{Binding Type, Converter={StaticResource PrintSettingTypeToVisibilityConverter}}"
                                      IconImage="ms-appx:///Resources/Images/img_btn_dummy_print_setting.png"/>
        </DataTemplate>
        <sel:PrintSettingsListTemplateSelector x:Key="PrintSettingsListTemplateSelector"
                                               ListViewItemToggleSwitchTemplate="{StaticResource TEMPLATE_ListViewItemToggleSwitch}"
                                               ListViewItemTextBoxTemplate="{StaticResource TEMPLATE_ListViewItemTextBox}"
                                               ListViewItemListTemplate="{StaticResource TEMPLATE_ListViewItemList}"/>
    </Grid.Resources>

    <ListView ItemsSource="{Binding Path=PrintSettingsList}"
              ItemContainerStyle="{StaticResource STYLE_ListViewItem}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <controls:GroupListControl Text="{Binding Text, Converter={StaticResource ResourceStringToTextConverter}, ConverterParameter=Uppercase}">
                    <controls:GroupListControl.Content>
                        <ListView x:Name="printSettingGroupListView" 
                                  ItemsSource="{Binding PrintSettings}" 
                                  ItemTemplateSelector="{StaticResource PrintSettingsListTemplateSelector}"
                                  ItemContainerStyle="{StaticResource STYLE_ListViewItem}" 
                                  IsItemClickEnabled="True" 
                                  SelectionMode="None">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="ItemClick">
                                    <Core:InvokeCommandAction Command="{Binding DataContext.SelectPrintSetting, ElementName=printSettingsBox}" InputConverter="{StaticResource ItemClickedConverter}"/>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </ListView>
                    </controls:GroupListControl.Content>
                </controls:GroupListControl>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid>
