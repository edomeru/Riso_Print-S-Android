<base:PageBase
    x:Class="SmartDeviceApp.Views.PrintPreviewPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SmartDeviceApp.Views"
    xmlns:base="using:SmartDeviceApp.Common.Base"
    xmlns:controls="using:SmartDeviceApp.Controls"
    xmlns:conv="using:SmartDeviceApp.Converters"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    DataContext="{Binding PrintPreviewViewModel, Source={StaticResource Locator}}"
    NavigationCacheMode="Enabled">
    
    <Page.Resources>
        <conv:PageNumberFormatConverter x:Key="PageNumberFormatConverter"/>
        <conv:PageIndexToSliderValueConverter x:Key="PageIndexToSliderValueConverter"/>
    </Page.Resources>

    <controls:ViewControl>
        <Grid Style="{StaticResource STYLE_PreviewGrid}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="{StaticResource SIZE_PageNumberSliderHeight}"/>
                <RowDefinition Height="{StaticResource SIZE_PageNumberTextHeight}"/>
            </Grid.RowDefinitions>
            <controls:TwoPageControl Grid.Row="0" RightPageImage="{Binding Path=RightPageImage}" LeftPageImage="{Binding Path=LeftPageImage}" ViewMode="{Binding Path=ViewMode}" Loaded="OnPageAreaLoaded"/>
            <Slider x:Name="pageNumberSlider" Grid.Row="1" Style="{StaticResource STYLE_PageNumberSlider}" Maximum="{Binding Path=PageTotal}" Value="{Binding Path=CurrentPageIndex, Mode=TwoWay, Converter={StaticResource PageIndexToSliderValueConverter}}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="ValueChanged">
                        <Core:InvokeCommandAction Command="{Binding Path=PageNumberSliderValueChange}" CommandParameter="{Binding ElementName=pageNumberSlider, Path=Value}"/>
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Slider>
            <!--TODO: Remove tapped easter egg :p For debugging purposes only-->
            <TextBlock x:Name="pageNumberText" Grid.Row="2" Style="{StaticResource STYLE_TextBlockBody}" Text="{Binding Path=PageNumber, Converter={StaticResource PageNumberFormatConverter}}" IsTapEnabled="True" Tapped="ResetTransforms" IsHitTestVisible="True"/>
        </Grid>
    </controls:ViewControl>

</base:PageBase>
